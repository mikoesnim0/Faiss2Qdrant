# FAISS to Qdrant Migration Tool

FAISS 벡터스토어에서 Qdrant로 벡터 데이터를 마이그레이션하는 도구입니다.

## 설정 방법

1. 환경 변수 설정:
   - `.env` 파일을 생성하고 필요한 환경변수를 설정합니다.
   - FAISS 벡터스토어 경로가 올바른지 확인합니다.

2. Qdrant 서버 실행:
   ```bash
   docker-compose up -d
   ```

3. 마이그레이션 실행:
   ```bash
   python -m migration.main
   ```

## 주의사항

- 마이그레이션 전에 데이터를 백업하세요.
- 대용량 데이터의 경우 시간이 오래 걸릴 수 있습니다.
- 오류 발생 시 로그를 확인하세요.

prompt:
"""
다음과 같은 곳에 따로- 기능이 따로 정의되도록 만들어줘.

첫 번째: main은 - 따로, 그냥 qdrant를 vectorstore에서 업로드하기만 하면 된다. ./vectorstore에 파일이 올라와 있을 테니 그것을 그대로 사용한다.

그리고 - 실제로 AWS S3에서 데이터를 다운로드하고, duplicate 제거한 상태로 유지해 주는 것을: 지금 내가 보여준 예시 파일을 통해 수행하게 된다.
고려해서 - 온전한 - 그렇게 하기 위해 - 갤발하기 위해 결정해야 하는 추가사항은 모두 나에게 미리 물어봐주도록 해줘. 너는 전문가니까 뭐가 필요한지를 알고 있잖아? 더욱 필요한 세부사항에 대해서 알려주면서 무엇을 해야 할지 내가 뭘 어떤 데이터를 추가해주면 되는지를 알려주도록 해줘.
너가 임의로하다가 망하면 - 나는 너에게 할당된 10억의 외주 금액을 손실될수밖에 없다
"""

# 기초 제공 정보
- 특히 AWS S3 관련 구조와 중복 제거 로직이 가장 중요.
## 1. AWS S3 관련
   - AWS S3 버킷 구조는 어떻게 되어 있나요?
        다음과 같은 환경변수로 관리한다.
        AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_REGION
        나머지는 바로 local에서 code로 지정해준다.
        버킷 구조는 다음과 같다.
            bucket_name="ilora",  # 실제 사용시 변경
            s3_prefix="dataset_rag/4_vectorstore/vectorstore"
   - 벡터스토어 파일들의 경로 구조가 어떻게 되나요?
   - 버전 관리를 위한 메타데이터 구조가 필요한데, 다음 중 어떤 방식을 선호하시나요?
     a) metadata.json 파일에 모든 버전 정보 저장
     b) 각 버전별 별도 디렉토리 구조
        a)를 통해서 - 각 버전 정보, 이름별 리스트로 관리한다. 따라서 - 필요한 메타데이터 가장 최근 것이 - 가장 위로 올라오게끔, 그리고 timestamp도 같이 올라가게끔 한다.

## 2. 중복 제거 로직
   - 중복 판단 기준이 무엇인가요? 
     a) 문서 ID
     b) 메타데이터의 특정 필드
     c) 벡터 유사도
   - 중복 제거 시 어떤 데이터를 유지할까요?
     a) 최신 데이터
     b) 가장 오래된 데이터
     c) 다른 기준

## 3. 메타데이터 관리
   - 각 벡터스토어 버전에 대해 어떤 메타데이터를 저장해야 하나요?
     - 생성 일시
     - 문서 수
     - 중복 제거 통계
     - 기타 필요한 정보


## 4. 에러 처리 및 복구
   - S3 업로드/다운로드 실패 시 어떻게 처리할까요?
   - 중복 제거 과정에서 오류 발생 시 어떻게 처리할까요?
   - 임시 파일 관리 정책은 어떻게 할까요?

## 5. 로깅 및 모니터링
   - 어떤 정보들을 로깅해야 할까요?
   - 로그 파일 관리 정책은 어떻게 할까요?

## 6. 성능 관련련
   - 예상되는 데이터 크기는 얼마인가요?
   - 메모리 사용량 제한이 있나요?
   - 처리 시간에 대한 요구사항이 있나요?

## 7. 추가 고려 사항

추가로 고려해야 할 사항들:
CI/CD 파이프라인 통합 계획
테스트 전략
백업 및 복구 전략
모니터링 및 알림 설정
이러한 세부사항들에 대한 결정이 있어야 프로젝트를 안정적으로 구현할 수 있습니다. 어떤 부분부터 논의해볼까요?